FROM node:10

RUN useradd -ms /bin/bash express
COPY src /home/express/image-viewer
RUN chown -R express:express /home/express/image-viewer

RUN apt-get update && apt-get -y install supervisor 

USER express

WORKDIR /home/express/image-viewer

RUN npm install
USER root
COPY supervisord.conf /etc/supervisor/conf.d/supervisord.conf