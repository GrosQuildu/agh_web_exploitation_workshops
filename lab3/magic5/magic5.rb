require 'sinatra'

get '/magic5' do
    equation = params['equation'] || ''
    html = <<-eos
<!DOCTYPE html>
<html>
<head>
    <title>-={ AGH web sec | Zciwonyzrgewj the Strange }=-</title>
    <style>
    body {
        background-color:black;
        background-image:
        radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
        radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
        radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 40px),
        radial-gradient(rgba(255,255,255,.4), rgba(255,255,255,.1) 2px, transparent 30px);
        background-size: 550px 550px, 350px 350px, 250px 250px, 150px 150px;
        background-position: 0 0, 40px 60px, 130px 270px, 70px 100px;
        margin: 0 auto;
    }
    #content {
        width: 500px;
        margin: 0 auto;
        color: white;
        margin-top: 15%%;
    }
    h2 {
        margin-bottom: 5px;
    }
    </style>
    <script>
        var eq = '<%%= %<eq>s %%>';
        if(eq != '')
            alert(eq);
    </script>
</head>
<body>
    <div id="content">
    <h2>Cast equation</h2> ~Zciwonyzrgewj the Strange
    <form method="GET">
    <input type="text" name="equation" placeholder="2*3+1" />
    <input type="submit" value="Cast" />
    </form>
    </div>
</body>
</html>
  eos
  html = html % {eq:equation}
    erb html
end